## A. High-Level Flow

| Step                 | Input Data     | Input Shape | Procedure          | Output Data                                                      | Output Shape           |
| -------------------- | -------------- | ----------- | ------------------ | ---------------------------------------------------------------- | ---------------------- |
| Ingestion            | DST file path  | `str`       | `read_dst_file`    | Raw DST string                                                   | `str`                  |
| Sectioning           | Raw DST string | `str`       | `parse_dst_string` | `event_list`, `sdmeta_list`, `sdwaveform_list`, `badsdinfo_list` | Lists of `ndarray`     |
| Parsing & Conversion | DST file path  | `str`       | `parse_dst_file`   | `data` dict                                                      | `dict` of arrays/lists |

---

## B. Conversion Details Table

| Input Array            | Input Shape                        | Procedure                                    | Output Array                                                                                                                                                                                                                                                                                                                                                                                                                                      | Output Shape                                                     |
| ---------------------- | ---------------------------------- | -------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------- |
| `E[:,0]`               | `(N,)`                             | Particle ID → atomic mass lookup             | `mass_number`                                                                                                                                                                                                                                                                                                                                                                                                                                     | `(N,)`                                                           |
| `E[:,1]`               | `(N,)`                             | Primary energy (EeV)                         | `energy`                                                                                                                                                                                                                                                                                                                                                                                                                                          | `(N,)`                                                           |
| `E[:,2:5]`             | `(N,3)`                            | Extract unit direction vector from θ, φ      | `shower_axis`                                                                                                                                                                                                                                                                                                                                                                                                                                     | `(N,3)`                                                          |
| `E[:,5:8]`             | `(N,3)`                            | Core coordinates (cm→m)                      | `shower_core`                                                                                                                                                                                                                                                                                                                                                                                                                                     | `(N,3)`                                                          |
| `E[:,7]`               | `(N,)`                             | Parse YYMMDD integer                         | `std_recon_yymmdd`                                                                                                                                                                                                                                                                                                                                                                                                                                | `(N,)`                                                           |
| `E[:,8]`               | `(N,)`                             | Parse HHMMSS integer                         | `std_recon_hhmmss`                                                                                                                                                                                                                                                                                                                                                                                                                                | `(N,)`                                                           |
| `E[:,11]`              | `(N,)`                             | Microsecond remainder                        | `std_recon_usec`                                                                                                                                                                                                                                                                                                                                                                                                                                  | `(N,)`                                                           |
| `E[:,9]`               | `(N,)`                             | Number of SD stations in cluster             | `std_recon_nsd`                                                                                                                                                                                                                                                                                                                                                                                                                                   | `(N,)`                                                           |
| `E[:,10]`              | `(N,)`                             | Number of waveforms                          | `std_recon_nofwf`                                                                                                                                                                                                                                                                                                                                                                                                                                 | `(N,)`                                                           |
| `E[:,56]`              | `(N,)`                             | Number of hits (rufptn\_.nhits)              | `std_recon_nhits`                                                                                                                                                                                                                                                                                                                                                                                                                                 | `(N,)`                                                           |
| `E[:,57]`              | `(N,)`                             | Number of clusters (rufptn\_.nsclust)        | `std_recon_nsclust`                                                                                                                                                                                                                                                                                                                                                                                                                               | `(N,)`                                                           |
| `E[:,58]`              | `(N,)`                             | Number of border stations (rufptn\_.nborder) | `std_recon_nborder`                                                                                                                                                                                                                                                                                                                                                                                                                               | `(N,)`                                                           |
| `E[:,59:61]`           | `(N,2)`                            | Total charge (rufptn\_.qtot)                 | `std_recon_qtot`                                                                                                                                                                                                                                                                                                                                                                                                                                  | `(N,2)`                                                          |
| `E[:,12]`              | `(N,)`                             | Reconstructed energy (EeV)                   | `std_recon_energy`                                                                                                                                                                                                                                                                                                                                                                                                                                | `(N,)`                                                           |
| `E[:,13]`              | `(N,)`                             | LDF scale (VEM·m⁻²)                          | `std_recon_ldf_scale`                                                                                                                                                                                                                                                                                                                                                                                                                             | `(N,)`                                                           |
| `E[:,14]`              | `(N,)`                             | LDF scale uncertainty                        | `std_recon_ldf_scale_err`                                                                                                                                                                                                                                                                                                                                                                                                                         | `(N,)`                                                           |
| `E[:,15]`              | `(N,)`                             | LDF fit χ²                                   | `std_recon_ldf_chi2`                                                                                                                                                                                                                                                                                                                                                                                                                              | `(N,)`                                                           |
| `E[:,16]`              | `(N,)`                             | LDF fit degrees of freedom                   | `std_recon_ldf_ndof`                                                                                                                                                                                                                                                                                                                                                                                                                              | `(N,)`                                                           |
| `E[:,17:19]`           | `(N,2)`                            | Core XY via LDF                              | `std_recon_shower_core`                                                                                                                                                                                                                                                                                                                                                                                                                           | `(N,2)`                                                          |
| `E[:,18:20]`           | `(N,2)`                            | Core XY uncertainty                          | `std_recon_shower_core_err`                                                                                                                                                                                                                                                                                                                                                                                                                       | `(N,2)`                                                          |
| `E[:,21]`              | `(N,)`                             | Particle density at 800 m (VEM·m⁻²)          | `std_recon_s800`                                                                                                                                                                                                                                                                                                                                                                                                                                  | `(N,)`                                                           |
| *Combining fits*       | *std\_recon\_*                     | Combine fixed-curve & free fits              | `std_recon_combined_energy`, `std_recon_combined_scale`, `std_recon_combined_scale_err`, `std_recon_combined_chi2`, `std_recon_combined_ndof`, `std_recon_combined_shower_core`, `std_recon_combined_shower_core_err`, `std_recon_combined_s800`                                                                                                                                                                                                  | `(N,)`, `(N,)`, `(N,)`, `(N,)`, `(N,)`, `(N,2)`, `(N,2)`, `(N,)` |
| *Geometry fit outputs* | *raw geom cols*                    | Extract angles, errors, border distances     | `std_recon_shower_axis`, `std_recon_shower_axis_fixed_curve`, `std_recon_shower_axis_combined`, `std_recon_shower_axis_err`, `std_recon_shower_axis_err_fixed_curve`, `std_recon_shower_axis_err_combined`, `std_recon_geom_chi2`, `std_recon_geom_ndof`, `std_recon_curvature`, `std_recon_curvature_err`, `std_recon_geom_chi2_fixed_curve`, `std_recon_geom_ndof_fixed_curve`, `std_recon_border_distance`, `std_recon_border_distance_tshape` | `(N,3)` ×3, `(N,)` ×6, `(N,)` ×4, `(N,)` ×2                      |
| Raw station metadata   | `(N,n_tiles,n_tiles,3)`            | Flatten & convert list-to-array              | `detector_positions_abs`                                                                                                                                                                                                                                                                                                                                                                                                                          | `(N,n_tiles,n_tiles,3)`                                          |
| *Center & normalize*   | `detector_positions_abs`           | Shift peak to center & normalize XY          | `detector_positions`                                                                                                                                                                                                                                                                                                                                                                                                                              | `(N,n_tiles,n_tiles,3)`                                          |
| Raw station IDs        | `(N,n_tiles,n_tiles)`              | Flatten & convert list-to-array              | `detector_positions_id`                                                                                                                                                                                                                                                                                                                                                                                                                           | `(N,n_tiles,n_tiles)`                                            |
| Raw station states     | `(N,n_tiles,n_tiles)`              | Flag installed vs missing                    | `detector_states`                                                                                                                                                                                                                                                                                                                                                                                                                                 | `(N,n_tiles,n_tiles)`                                            |
| *Existence mask*       | `detector_states`                  | Identify existing stations                   | `detector_exists`                                                                                                                                                                                                                                                                                                                                                                                                                                 | `(N,n_tiles,n_tiles)`                                            |
| Raw bad-station mask   | `(N,n_tiles,n_tiles)`              | Flag bad stations (1=bad)                    | `detector_good`                                                                                                                                                                                                                                                                                                                                                                                                                                   | `(N,n_tiles,n_tiles)`                                            |
| *Fold count*           | `detector_exists`, `detector_good` | Count valid detector folds                   | `nfold`                                                                                                                                                                                                                                                                                                                                                                                                                                           | `(N,n_tiles,n_tiles)`                                            |
| Raw waveform lists     | `(N,n_tiles,n_tiles,128)`          | Pedestal subtraction; ADC→VEM                | `time_traces_low`, `time_traces_up`                                                                                                                                                                                                                                                                                                                                                                                                               | `(N,n_tiles,n_tiles,128)`                                        |
| Raw clock counts       | `(N,n_tiles,n_tiles)`              | Multiply by 4000 ns/tick                     | `arrival_times_low`, `arrival_times_up`                                                                                                                                                                                                                                                                                                                                                                                                           | `(N,n_tiles,n_tiles)`                                            |
| `time_traces_*`        | `(N,n_tiles,n_tiles,128)`          | Sum over time axis                           | `total_signals_low`, `total_signals_up`                                                                                                                                                                                                                                                                                                                                                                                                           | `(N,n_tiles,n_tiles)`                                            |

---

*End of parsed DST fields to HDF5 mapping.*
